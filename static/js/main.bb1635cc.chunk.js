(this["webpackJsonpprinters-inventory"]=this["webpackJsonpprinters-inventory"]||[]).push([[0],{251:function(e,t,r){},252:function(e,t,r){},445:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(33),s=r.n(a),i=(r(251),r(16)),o=(r(252),r(41)),j=r(11),l=r(34),d=r(64),u=r(239),b=r(44),h=r(245),O=r(19),p={step:0,printers:[]};var x=Object(d.combineReducers)({firestore:b.firestoreReducer,appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRINTERS":return Object(O.a)(Object(O.a)({},e),{},{printers:[].concat(Object(h.a)(e.printers),[t.payload.data])});case"CLEAN_PRINTERS":return Object(O.a)(Object(O.a)({},e),{},{printers:[]});case"GET_CURRENT_PRINTER":return Object(O.a)(Object(O.a)({},e),{},{currentPrinter:t.payload.data(),id:t.payload.id});default:return e}}}),m=r(240),f=(r(401),m.a.initializeApp({apiKey:"AIzaSyCSMF9icWtZu6X6n8b7VRWTptcLWZsZl94",authDomain:"printersinventory.firebaseapp.com",databaseURL:"https://printersinventory-default-rtdb.firebaseio.com",projectId:"printersinventory",storageBucket:"printersinventory.appspot.com",messagingSenderId:"681016806451",appId:"1:681016806451:web:4607397a34622266532746"})),g=r(241),v=(r(446),r(53)),w=Object(d.createStore)(x,Object(u.composeWithDevTools)(Object(b.reduxFirestore)(f),Object(d.applyMiddleware)(g.a.withExtraArgument({getFirebase:v.getFirebase,getFirestore:function(){return Object(v.getFirebase)().firestore()}})))),y=r(449),S=r(450),k=r(166),I=r.n(k),R=r(242),C=r(109),N=r(455),E=r(448),F=r(3),P=c.a.createContext(),T=function(e){var t=e.children,r=Object(n.useState)(null),c=Object(i.a)(r,2),a=c[0],s=c[1],o=Object(n.useState)(!0),j=Object(i.a)(o,2),l=j[0],d=j[1];return Object(n.useEffect)((function(){f.auth().onAuthStateChanged((function(e){s(e),d(!1)}))}),[]),l?Object(F.jsx)(F.Fragment,{children:"\u0141adowanie..."}):Object(F.jsx)(P.Provider,{value:{currentUser:a},children:t})},z=Object(j.h)((function(e){var t=e.history,r=Object(n.useState)(""),c=Object(i.a)(r,2),a=c[0],s=c[1],o=Object(n.useState)(!1),l=Object(i.a)(o,2),d=l[0],u=l[1],b=Object(n.useState)({email:"",password:""}),h=Object(i.a)(b,2),p=h[0],x=h[1];Object(n.useEffect)((function(){var e=localStorage.getItem("checkbox");return console.log(e),e&&(x(Object(O.a)(Object(O.a)({},p),{},{email:localStorage.getItem("userName"),password:localStorage.getItem("password")})),u(!0)),console.log(d),{}}),[]);var m=function(e){x(Object(O.a)(Object(O.a)({},p),{},Object(C.a)({},e.target.name,e.target.value)))},g=Object(n.useCallback)(function(){var e=Object(R.a)(I.a.mark((function e(r){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),d?(localStorage.setItem("userName",p.email),localStorage.setItem("password",p.password),localStorage.setItem("checkbox",!0),u(!0)):(localStorage.removeItem("userName"),localStorage.removeItem("password"),localStorage.removeItem("checkbox"),u(!1)),e.prev=2,e.next=5,f.auth().signInWithEmailAndPassword(p.email,p.password);case 5:t.push("/main"),e.next=20;break;case 8:e.prev=8,e.t0=e.catch(2),e.t1=e.t0.code,e.next="auth/invalid-email"===e.t1?13:"auth/wrong-password"===e.t1?15:"auth/user-not-found"===e.t1?17:19;break;case 13:return s("Niepoprawny adres email"),e.abrupt("break",20);case 15:return s("Nieprawid\u0142owe has\u0142o"),e.abrupt("break",20);case 17:return s("Taki u\u017cytkownik nie istnieje"),e.abrupt("break",20);case 19:console.log(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,d,p]);return Object(n.useContext)(P).currentUser?Object(F.jsx)(j.a,{to:"/main"}):Object(F.jsx)("main",{className:"signin",style:{backgroundImage:"linear-gradient(#f9fafb, #f9fafbcc), url(/images/bg1.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:Object(F.jsxs)(N.a,{className:"form-signin",onSubmit:g,children:[Object(F.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Zaloguj si\u0119"}),Object(F.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(F.jsx)(N.a.Label,{children:"Adres Email"}),Object(F.jsx)(N.a.Control,{type:"email",name:"email",placeholder:"Wpisz adres email...",value:p.email,onChange:function(e){return m(e)}})]}),Object(F.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(F.jsx)(N.a.Label,{children:"Has\u0142o"}),Object(F.jsx)(N.a.Control,{type:"password",name:"password",placeholder:"Wpisz has\u0142o...",value:p.password,onChange:function(e){return m(e)}})]}),Object(F.jsx)(N.a.Group,{children:Object(F.jsx)(N.a.Label,{children:a})}),Object(F.jsx)(N.a.Group,{controlId:"formBasicCheckbox",children:Object(F.jsx)(N.a.Check,{checked:d,type:"checkbox",onChange:function(){return u(!d)},label:"Zapami\u0119taj mnie",className:"checkbox mb-3 mt-3"})}),Object(F.jsx)(E.a,{variant:"primary",type:"submit",className:"w-100 btn btn-lg btn-primary",children:"Zaloguj"})]})})})),D=r(243),L=r(458);function A(){return function(e){Object(b.getFirestore)().collection("printers").get().then((function(t){t.forEach((function(t){e({type:"FETCH_PRINTERS",payload:{data:t.data(),id:t.id}})}))}))}}var W=r.p+"static/media/m200.98415883.jpg";r.p;var _=Object(l.b)((function(e,t){return{printers:e.appReducer.printers}}),(function(e){return{fetchPrinters:function(){return e(A())},cleanPrinters:function(){return e((function(e){e({type:"CLEAN_PRINTERS",payload:[]})}))}}}))((function(e){var t=e.fetchPrinters,r=e.cleanPrinters,c=e.printers,a=Object(j.g)(),s=Object(n.useState)(!1),o=Object(i.a)(s,2),l=o[0],d=o[1];Object(n.useEffect)((function(){return l||(t(),console.log("FETCH PRINTERS"),d(!0)),function(){r()}}),[t,r,l]);return Object(F.jsx)(y.a,{children:Object(F.jsx)(S.a,{children:c.map((function(e){return Object(F.jsx)(D.a,{md:4,className:"mt-4",children:Object(F.jsx)(L.a,{style:{backgroundImage:"url(".concat(W,")")},className:"card card-cover h-100 overflow-hidden text-white rounded-5 shadow-lg",children:Object(F.jsxs)(L.a.Body,{className:"card-body d-flex flex-column h-100 p-5 text-white text-shadow-1",children:[Object(F.jsxs)(L.a.Title,{children:["SERIAL: ",e.serial]}),Object(F.jsx)(L.a.Text,{className:"card-text pt-5 mt-5 mb-4 display-6 lh-1 fw-bold",children:e.name}),Object(F.jsx)(E.a,{onClick:function(){return function(e){a.push("/printers/".concat(e.serial))}(e)},variant:"btn btn-outline-secondary",children:"Zg\u0142o\u015b serwis"})]})})},e.serial)}))})})})),Z=r(451),B=r(452),U=r(453);var G=function(e){var t=e.data,r=t.dateOfService,n=t.scopeOfWork,a=t.attentions,s=t.newServiceRequest;console.log(s);var i=new Date(1e3*r.seconds).toLocaleDateString();return Object(F.jsx)(c.a.Fragment,{children:Object(F.jsx)("tbody",{className:s?"bg-primary":null,children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{children:e.index+1}),Object(F.jsx)("td",{children:i}),Object(F.jsx)("td",{children:s?Object(F.jsx)("p",{children:"Nowe zg\u0142oszenie serwisowe"}):Object(F.jsx)("ul",{children:n.map((function(e){return Object(F.jsx)("li",{children:e})}))})}),Object(F.jsx)("td",{children:a||"brak uwag"})]})})})},H=r(454);var M=Object(l.b)((function(e){return{printerId:e.appReducer.id}}),(function(e){return{addServiceRequest:function(t,r){return e(function(e,t){return function(r){var n=Object(b.getFirestore)();n.collection("printers").doc(e).update({services:n.FieldValue.arrayUnion({newServiceRequest:!0,dateOfService:new Date,attentions:t,scopeOfWork:[]})}),r({type:"ADD_SERVICE_REQUEST",payload:"fdfdsfds"})}}(t,r))}}}))((function(e){var t=e.show,r=e.handleClose,c=e.printer,a=e.addServiceRequest,s=e.printerId,o=Object(n.useState)(),j=Object(i.a)(o,2),l=j[0],d=j[1];return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(H.a,{show:t,onHide:r,animation:!1,children:[Object(F.jsx)(H.a.Header,{closeButton:!0,children:Object(F.jsx)(H.a.Title,{children:"Zg\u0142oszenie serwisowe"})}),Object(F.jsx)(H.a.Body,{as:"div",children:Object(F.jsx)(y.a,{children:Object(F.jsx)(S.a,{children:Object(F.jsx)(D.a,{children:Object(F.jsxs)("form",{children:[Object(F.jsxs)("div",{class:"mb-3",children:[Object(F.jsxs)("h3",{children:["Model drukarki: ",c?c.name:"\u0142adowanie..."]}),Object(F.jsxs)("h3",{children:["Numer seryjny: ",c?c.serial:"\u0142adowanie..."]})]}),Object(F.jsxs)("div",{class:"mb-3",children:[Object(F.jsx)("label",{for:"exampleInputPassword1",class:"form-label",children:"Napisz co nie dzia\u0142a"}),Object(F.jsx)("textarea",{onChange:function(e){return d(e.target.value)},class:"form-control",id:"exampleFormControlTextarea1",rows:"5"})]})]})})})})}),Object(F.jsxs)(H.a.Footer,{children:[Object(F.jsx)(E.a,{variant:"secondary",onClick:r,children:"Zamknij"}),Object(F.jsx)(E.a,{variant:"primary",type:"submit",onClick:function(e){return function(e){e.preventDefault(),a(s,l),r()}(e)},children:"Wy\u015blij zg\u0142oszenie"})]})]})})}));var q=Object(l.b)((function(e,t){var r=t.match.params;return console.log(e),{printerId:r,printer:e.appReducer.currentPrinter}}),(function(e,t){var r=t.match.params.product;return{getCurrentPrinter:function(){return e(function(e){return function(t){Object(b.getFirestore)().collection("printers").where("serial","==",e).get().then((function(e){e.forEach((function(e){t({type:"GET_CURRENT_PRINTER",payload:e})}))}))}}(r))}}}))((function(e){e.printerId;var t=e.getCurrentPrinter,a=e.printer,s=r(441);Object(n.useEffect)((function(){t()}),[t]);var o=Object(n.useMemo)((function(){return a&&0!==Object.keys(a).length}),[a]),j=Object(n.useState)(!1),l=Object(i.a)(j,2),d=l[0],u=l[1];return console.log(s()),Object(F.jsx)(c.a.Fragment,{children:o?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Z.a,{children:Object(F.jsx)(y.a,{children:Object(F.jsxs)(S.a,{children:[Object(F.jsx)(D.a,{xs:6,md:4,children:Object(F.jsx)(B.a,{style:{width:"100%"},src:"https://images-na.ssl-images-amazon.com/images/I/61aiRuGPewL._SL1500_.jpg",rounded:!0})}),Object(F.jsxs)(D.a,{xs:6,md:4,children:[Object(F.jsx)("h1",{children:o?a.name:"nie za\u0142adowano"}),Object(F.jsxs)("h3",{children:["SERIAL: ",o?a.serial:"nie dzia\u0142a"]}),Object(F.jsx)("p",{children:Object(F.jsx)(E.a,{variant:"primary",onClick:function(){return u(!0)},children:"Zg\u0142o\u015b serwis"})})]})]})})}),Object(F.jsx)(M,{show:d,handleClose:function(){return u(!1)},printer:a}),Object(F.jsxs)(U.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:"#"}),Object(F.jsx)("th",{children:"Data Serwisu"}),Object(F.jsx)("th",{children:"Zakres prac"}),Object(F.jsx)("th",{children:"Uwagi"})]})}),o?a.services?a.services.map((function(e,t){return Object(F.jsx)(G,{index:t,data:e},s())})):Object(F.jsx)("tbody",{children:Object(F.jsx)("tr",{children:Object(F.jsx)("td",{children:"brak danych"})})}):"nie dzia\u0142a"]})]}):Object(F.jsx)("div",{class:"spinner-border",role:"status",children:Object(F.jsx)("span",{class:"sr-only"})})})}));var V=Object(l.b)((function(e,t){return{printers:e.appReducer.printers}}),(function(e){return{fetchPrinters:function(){return e(A())},cleanPrinters:function(){return e((function(e){e({type:"CLEAN_PRINTERS",payload:[]})}))}}}))((function(e){var t=e.fetchPrinters,r=e.cleanPrinters,c=e.printers;return Object(n.useEffect)((function(){return t(),function(){r()}}),[t,r]),Object(F.jsx)("div",{className:"mt-5",children:c.map((function(e){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("h1",{children:[e.name," - ",e.serial]}),Object(F.jsxs)(U.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:"Data Serwisu"}),Object(F.jsx)("th",{children:"Zakres prac"}),Object(F.jsx)("th",{children:"Uwagi"})]})}),Object(F.jsx)("tbody",{children:e.services.map((function(e){return Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{children:new Date(1e3*e.dateOfService.seconds).toLocaleDateString()}),Object(F.jsx)("td",{children:Object(F.jsx)("ul",{children:e.scopeOfWork>=0?null:e.scopeOfWork.map((function(e,t){return Object(F.jsx)("li",{children:e},t)}))})}),Object(F.jsx)("td",{children:e.attentions})]})}))})]})]})}))})})),J=r(246),K=function(e){var t=e.component,r=Object(J.a)(e,["component"]),c=Object(n.useContext)(P).currentUser;return console.log(!!c),console.log(r),Object(F.jsx)(j.b,Object(O.a)(Object(O.a)({},r),{},{render:function(e){return c?Object(F.jsx)(t,Object(O.a)({},e)):Object(F.jsx)(j.a,{to:"/login"})}}))},Q=r(457),X=r(456),Y=r.p+"static/media/logo.0ee4273f.svg";function $(){var e=Object(n.useState)(),t=Object(i.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){f.auth().onAuthStateChanged((function(e){c(e||null)}))})),Object(F.jsx)("div",{children:r&&Object(F.jsx)(Q.a,{bg:"light",variant:"light",children:Object(F.jsxs)(y.a,{children:[Object(F.jsx)(Q.a.Brand,{className:"ml-auto",href:"/main",children:Object(F.jsx)("img",{className:"brand-logo",src:Y,alt:"serwis drkarek 3D"})}),Object(F.jsxs)(X.a,{className:"mr-auto",children:[Object(F.jsx)(o.b,{className:"nav-link",to:"/details",children:"Wszystkie serwisy"}),Object(F.jsx)(o.b,{className:"nav-link",to:"/main",children:"Drukarki"})]}),Object(F.jsx)(Q.a.Collapse,{className:"justify-content-end",children:Object(F.jsx)(E.a,{onClick:function(){return f.auth().signOut()},variant:"outline-primary",children:"Wyloguj"})})]})})})}r(442);var ee=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),r=t[0],c=t[1];return f.auth().onAuthStateChanged((function(e){c(e||null)})),Object(F.jsx)(o.a,{children:Object(F.jsx)(l.a,{store:w,children:Object(F.jsx)(v.ReactReduxFirebaseProvider,{firebase:f,config:{useFirestoreForProfile:!0,userProfile:"printers",createFirestoreInstance:v.createFirestoreInstance},dispatch:w.dispatch,createFirestoreInstance:v.createFirestoreInstance,children:Object(F.jsxs)(T,{children:[r&&Object(F.jsx)($,{}),r?null:Object(F.jsx)(j.a,{to:"/main"}),Object(F.jsx)(j.d,{children:Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(j.b,{exact:!0,path:"/login",children:Object(F.jsx)(z,{})}),Object(F.jsx)(y.a,{children:Object(F.jsxs)(S.a,{children:[Object(F.jsx)(K,{path:"/printers/:product",component:q}),Object(F.jsx)(K,{path:"/main",component:_}),Object(F.jsx)(K,{path:"/details",component:V})]})})]})})]})})})})},te=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,459)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};s.a.render(Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(ee,{})}),document.getElementById("root")),te()}},[[445,1,2]]]);
//# sourceMappingURL=main.bb1635cc.chunk.js.map